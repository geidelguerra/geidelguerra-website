<!DOCTYPE html>
<html>
    <head>
        <title>Happy Birthday - 2025</title>
        <link rel="preconnect" href="https://fonts.bunny.net">
        <link href="https://fonts.bunny.net/css?family=alex-brush:400" rel="stylesheet" />
        <style>
            body {
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
                margin: 0;
            }

            #content {
                position: relative;
                /* transform-origin: center; */
                width: 100%;
                height: 100%;
            }

            .card {
                position: absolute;
                border-radius: 20px;
                transition: all ease-in 0.2s;
                box-shadow: 0 0 2px rgba(0, 0, 0, 0.1);
                padding: 20px;
                overflow: hidden;
                cursor: pointer;
                transform-origin: bottom center;
                box-sizing: content-box;
                background: white;

                img {
                    box-sizing: content-box;
                    object-fit: contain;
                    border-radius: 10px;
                    width: 400px;
                    filter: grayscale(100%);
                    transition: all ease-in 0.2s;
                }

                &:hover {
                    z-index: 100;

                    img {
                        filter: grayscale(0);
                    }
                }
            }

            #text {
                position: absolute;
                font-family: 'Alex Brush', handwriting;
                font-size: 45px;
                font-weight: bold;
                color: white;
                text-align: center;
                text-shadow: 0 0 10px rgba(0, 0, 0, 1);
                z-index: 101;
            }

            #center {
                position: absolute;
                background: red;
                /* mix-blend-mode: color-burn; */
                border-radius: 100%;
            }
        </style>
    </head>
    <body>
        <div class="card"><img src="/static/birthdays/2025/01.jpg"></div>
        <!-- <div class="card"><img src="/static/birthdays/2025/02.jpg"></div>
        <div class="card"><img src="/static/birthdays/2025/03.jpg"></div>
        <div class="card"><img src="/static/birthdays/2025/04.jpg"></div> -->
        <div id="center"></div>
        <div id="text">Feliz cumplea√±os mi amor</div>
        <script type="text/javascript">
            const cards = Array.from(document.querySelectorAll('.card'));
            const textEl = document.querySelector('#text');
            const centerEl = document.querySelector('#center');

            const loadingPromises = [];
            const radius = 100;

            cards.forEach((cardEl) => {
                cardEl.onmouseover = (e) => {
                    // cardEl.style.transform = 'translateY(-20px)';
                }

                cardEl.onmouseout = (e) => {
                    // cardEl.style.transform = `rotate(${cardEl._data.angle}px)`;
                }

                const imageEl = cardEl.querySelector('img');

                if (!imageEl.complete) {
                    loadingPromises.push(new Promise((resolve) => imageEl.onload = resolve));
                }
            });

            Promise.all(loadingPromises).then(() => {
                console.log('Loaded');
                update();
            });

            function update() {
                centerEl.style.left = `${center.x - radius}px`;
                centerEl.style.top = `${center.y - radius}px`;
                centerEl.style.width = `${radius * 2}px`;
                centerEl.style.height = `${radius * 2}px`;
                const startAngle = -45;
                const endAngle = 45;
                let angleIncrement = (endAngle - startAngle) / cards.length;

                for (let i = 0; i < cards.length; i++) {
                    const cardEl = cards[i];
                    // const angle = startAngle + i * angleIncrement;
                    const centerX = window.innerWidth / 2;
                    const centerY = window.innerHeight / 2;
                    const angle = 45;
                    const angleRadian = angle * (Math.PI / 180);
                    let cardWidth = cardEl.clientWidth;
                    let cardHeight = cardEl.clientHeight;
                    let cardX = radius * Math.cos(angleRadian);
                    let cardY = radius * Math.sin(angleRadian) + center.y - cardHeight;
                    // cardEl.style.transform = `rotate(${angle}deg)`;
                    cardEl.style.left = `${cardX}px`;
                    cardEl.style.top = `${cardY}px`;
                    cardEl.dataset.angle = angle;
                    cardEl.dataset.width = cardWidth;
                    cardEl.dataset.height = cardHeight;
                }
            }

            window.addEventListener('resize', update);
        </script>
    </body>
</html>
